<template name="goal_tree">

{{#unless atTopLevel}}
  {{> focused_goal_header }}
{{/unless}}

{{> add_subgoal }}

<div class="sixteen wide column">
  <div id="board-container">
    {{#each filteredSubgoals}}
      {{> goal_card goal=this }}
    {{/each}}
  </div>
</div>

</template>


<template name="focused_goal_header">
<div id="goal-title-column" class="twelve wide column">
  <div class="goal-tree-menu">
    {{#if goal.complete}}
    <i class="large green checkmark link icon goal-complete-button"></i>
    {{else}}
    <div class="ui simple dropdown">
      <i class="large vertical ellipsis icon"></i>
      {{> goal_menu goal=goal hideCompletedSubgoalsAction=true}}
    </div>
    {{/if}}
  </div>
  <h1 id="tree-header" class="ui center aligned header {{#if goal.complete}}complete{{/if}} {{#if isActive goal._id}}active-goal{{/if}}">
    {{goal.title}}
  </h1>
</div>
</template>


<template name="add_subgoal">
<div class="twelve wide column">
  {{#if atTopLevel}}
  <div class="ui large fluid action input">
    <input type="text" placeholder="Goal title" id="new-goal-title">
    <div id="add-goal-button" class="ui large purple labeled icon button">
      <i class="icon plus"></i>
      Add
    </div>
  </div>
  {{else}}
  <div class="ui large fluid action input">
    <input disabled={{#if goal.complete}}disabled{{/if}} type="text" placeholder="Subgoal title" id="new-goal-title">
    <div id="add-goal-button" class="ui large purple {{#if goal.complete}}disabled{{/if}} labeled icon button">
      <i class="icon plus"></i>
      Add
    </div>
  </div>
  {{/if}}
</div>
</template>
