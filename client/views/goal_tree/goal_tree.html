<template name="goal_tree">

<nav class="ui purple inverted fixed menu">
  <a class="item" href="/"> <i class="home icon"></i> Home </a>

  {{#unless atTopLevel}}
  <div id="pop-stack-link" class="ui simple dropdown item" title="{{parent.title}}">
    <i class="chevron up icon"></i>
    {{goal.title}}
    <div class="menu">
    {{#each breadcrumb}}
      <a class="item" href="{{pathFor route='goal' _id=_id}}">{{title}}</a>
    {{/each}}
    </div>
  </div>

  <div class="link item">
    <i class="plus icon add-card-button"></i>
  </div>

  <div class="ui simple dropdown item">
    <i class="vertical ellipsis icon"></i>
    {{> goal_menu goal=goal hideCompletedSubgoalsAction=true}}
  </div>
  {{/unless}}

  <div class="right item">
    {{> loginButtons align="right"}}
  </div>

  {{#if activeGoal}}
  <a id="active-goal-box" class="right item" href="{{pathFor route='goal' _id=activeGoal._id}}" title="{{activeGoal.title}}">
    <i class="wait icon"></i>
    {{activeGoal.title}}
  </a>
  {{else}}
  <div id="no-active-goal-box" class="right item">
    No active goal
  </div>
  {{/if}}
</nav>

<main class="ui centered vertically padded page grid">
  <div class="sixteen wide column">
    <div id="board-container">
      {{#each filteredSubgoals}}
        {{> goal_card goal=this }}
      {{/each}}
      <div class="goal-card new-card-placeholder">
        <input class="new-card-title" type="text" required="required">
        <div class="action-box">
          <i class="plus link icon submit-card-button"></i>
        </div>
      </div>
    </div>
  </div>
</main>

</template>
